import { describe, expect, it } from 'vitest';
import md5 from 'md5';
import { Student } from '../../src/model/Student';
import { NotFoundError } from '../../src/errors/NotFoundError';

describe('StudentTest', () =>
{
    it('fail to get student by token', () =>
    {
        expect(() => { Student.fromToken(md5('invalidemail') as string); }).toThrow(NotFoundError);
    });

    it('get student by Token', () =>
    {
        let student = Student.fromToken(md5('first_name.last_name+1@gmail.com') as string);
        expect(student.id).toEqual('first_name.last_name+1@gmail.com');
    });

    it('login', () =>
    {
        let student = Student.login('first_name.last_name+1@gmail.com', 'unknown');
        expect(student).toBeTruthy();
        expect(student?.token).toEqual('e649905a37aa58c397647862118e3474')
        expect(student?.user.id).toEqual('first_name.last_name+1@gmail.com')
    });

    it('fail to login', () =>
    {
        let student = Student.login('student+100@gmail.com', 'unknown');
        expect(student).toBeNull();
    });

    it('get group for each student', () =>
    {
        let groupStudent = Student.groupStudent();
        expect(groupStudent).toEqual([{ "group_id": "S20213-LOG121-01", "student_id": "first_name.last_name+1@gmail.com" }, { "group_id": "S20213-LOG121-02", "student_id": "first_name.last_name+2@gmail.com" }, { "group_id": "S20213-LOG121-04", "student_id": "first_name.last_name+3@gmail.com" }, { "group_id": "S20213-LOG210-01", "student_id": "first_name.last_name+4@gmail.com" }, { "group_id": "S20213-LOG210-02", "student_id": "first_name.last_name+5@gmail.com" }, { "group_id": "S20213-LOG210-03", "student_id": "first_name.last_name+6@gmail.com" }, { "group_id": "S20213-LOG240-01", "student_id": "first_name.last_name+7@gmail.com" }, { "group_id": "S20213-LOG240-02", "student_id": "first_name.last_name+8@gmail.com" }, { "group_id": "S20213-LOG240-03", "student_id": "first_name.last_name+9@gmail.com" }, { "group_id": "S20213-LOG320-01", "student_id": "first_name.last_name+10@gmail.com" }, { "group_id": "S20213-LOG320-02", "student_id": "first_name.last_name+11@gmail.com" }, { "group_id": "S20213-LOG320-04", "student_id": "first_name.last_name+12@gmail.com" }, { "group_id": "S20213-LOG410-01", "student_id": "first_name.last_name+13@gmail.com" }, { "group_id": "S20213-LOG410-02", "student_id": "first_name.last_name+14@gmail.com" }, { "group_id": "S20213-LOG430-01", "student_id": "first_name.last_name+15@gmail.com" }, { "group_id": "S20213-LOG430-02", "student_id": "first_name.last_name+16@gmail.com" }, { "group_id": "S20213-LOG121-01", "student_id": "first_name.last_name+17@gmail.com" }, { "group_id": "S20213-LOG121-02", "student_id": "first_name.last_name+18@gmail.com" }, { "group_id": "S20213-LOG121-04", "student_id": "first_name.last_name+19@gmail.com" }, { "group_id": "S20213-LOG210-01", "student_id": "first_name.last_name+20@gmail.com" }, { "group_id": "S20213-LOG210-02", "student_id": "first_name.last_name+21@gmail.com" }, { "group_id": "S20213-LOG210-03", "student_id": "first_name.last_name+22@gmail.com" }, { "group_id": "S20213-LOG240-01", "student_id": "first_name.last_name+23@gmail.com" }, { "group_id": "S20213-LOG240-02", "student_id": "first_name.last_name+24@gmail.com" }, { "group_id": "S20213-LOG240-03", "student_id": "first_name.last_name+25@gmail.com" }, { "group_id": "S20213-LOG320-01", "student_id": "first_name.last_name+26@gmail.com" }, { "group_id": "S20213-LOG320-02", "student_id": "first_name.last_name+27@gmail.com" }, { "group_id": "S20213-LOG320-04", "student_id": "first_name.last_name+28@gmail.com" }, { "group_id": "S20213-LOG410-01", "student_id": "first_name.last_name+29@gmail.com" }, { "group_id": "S20213-LOG410-02", "student_id": "first_name.last_name+30@gmail.com" }, { "group_id": "S20213-LOG430-01", "student_id": "first_name.last_name+31@gmail.com" }, { "group_id": "S20213-LOG430-02", "student_id": "first_name.last_name+32@gmail.com" }, { "group_id": "S20213-LOG121-01", "student_id": "first_name.last_name+33@gmail.com" }, { "group_id": "S20213-LOG121-02", "student_id": "first_name.last_name+34@gmail.com" }, { "group_id": "S20213-LOG121-04", "student_id": "first_name.last_name+35@gmail.com" }, { "group_id": "S20213-LOG210-01", "student_id": "first_name.last_name+36@gmail.com" }, { "group_id": "S20213-LOG210-02", "student_id": "first_name.last_name+37@gmail.com" }, { "group_id": "S20213-LOG210-03", "student_id": "first_name.last_name+38@gmail.com" }, { "group_id": "S20213-LOG240-01", "student_id": "first_name.last_name+39@gmail.com" }, { "group_id": "S20213-LOG240-02", "student_id": "first_name.last_name+40@gmail.com" }, { "group_id": "S20213-LOG240-03", "student_id": "first_name.last_name+41@gmail.com" }, { "group_id": "S20213-LOG320-01", "student_id": "first_name.last_name+42@gmail.com" }, { "group_id": "S20213-LOG320-02", "student_id": "first_name.last_name+43@gmail.com" }, { "group_id": "S20213-LOG320-04", "student_id": "first_name.last_name+44@gmail.com" }, { "group_id": "S20213-LOG410-01", "student_id": "first_name.last_name+45@gmail.com" }, { "group_id": "S20213-LOG410-02", "student_id": "first_name.last_name+46@gmail.com" }, { "group_id": "S20213-LOG430-01", "student_id": "first_name.last_name+47@gmail.com" }, { "group_id": "S20213-LOG430-02", "student_id": "first_name.last_name+48@gmail.com" }, { "group_id": "S20213-LOG121-01", "student_id": "first_name.last_name+49@gmail.com" }, { "group_id": "S20213-LOG121-02", "student_id": "first_name.last_name+50@gmail.com" }, { "group_id": "S20213-LOG121-04", "student_id": "first_name.last_name+51@gmail.com" }, { "group_id": "S20213-LOG210-01", "student_id": "first_name.last_name+52@gmail.com" }, { "group_id": "S20213-LOG210-02", "student_id": "first_name.last_name+53@gmail.com" }, { "group_id": "S20213-LOG210-03", "student_id": "first_name.last_name+54@gmail.com" }, { "group_id": "S20213-LOG240-01", "student_id": "first_name.last_name+55@gmail.com" }, { "group_id": "S20213-LOG240-02", "student_id": "first_name.last_name+56@gmail.com" }, { "group_id": "S20213-LOG240-03", "student_id": "first_name.last_name+57@gmail.com" }, { "group_id": "S20213-LOG320-01", "student_id": "first_name.last_name+58@gmail.com" }, { "group_id": "S20213-LOG320-02", "student_id": "first_name.last_name+59@gmail.com" }, { "group_id": "S20213-LOG320-04", "student_id": "first_name.last_name+60@gmail.com" }, { "group_id": "S20213-LOG410-01", "student_id": "first_name.last_name+61@gmail.com" }, { "group_id": "S20213-LOG410-02", "student_id": "first_name.last_name+62@gmail.com" }, { "group_id": "S20213-LOG430-01", "student_id": "first_name.last_name+63@gmail.com" }, { "group_id": "S20213-LOG430-02", "student_id": "first_name.last_name+64@gmail.com" }, { "group_id": "S20213-LOG121-01", "student_id": "first_name.last_name+65@gmail.com" }, { "group_id": "S20213-LOG121-02", "student_id": "first_name.last_name+66@gmail.com" }, { "group_id": "S20213-LOG121-04", "student_id": "first_name.last_name+67@gmail.com" }, { "group_id": "S20213-LOG210-01", "student_id": "first_name.last_name+68@gmail.com" }, { "group_id": "S20213-LOG210-02", "student_id": "first_name.last_name+69@gmail.com" }, { "group_id": "S20213-LOG210-03", "student_id": "first_name.last_name+70@gmail.com" }, { "group_id": "S20213-LOG240-01", "student_id": "first_name.last_name+71@gmail.com" }, { "group_id": "S20213-LOG240-02", "student_id": "first_name.last_name+72@gmail.com" }, { "group_id": "S20213-LOG240-03", "student_id": "first_name.last_name+73@gmail.com" }, { "group_id": "S20213-LOG320-01", "student_id": "first_name.last_name+74@gmail.com" }, { "group_id": "S20213-LOG320-02", "student_id": "first_name.last_name+75@gmail.com" }, { "group_id": "S20213-LOG320-04", "student_id": "first_name.last_name+76@gmail.com" }, { "group_id": "S20213-LOG410-01", "student_id": "first_name.last_name+77@gmail.com" }, { "group_id": "S20213-LOG410-02", "student_id": "first_name.last_name+78@gmail.com" }, { "group_id": "S20213-LOG430-01", "student_id": "first_name.last_name+79@gmail.com" }, { "group_id": "S20213-LOG430-02", "student_id": "first_name.last_name+80@gmail.com" }, { "group_id": "S20213-LOG121-01", "student_id": "first_name.last_name+81@gmail.com" }, { "group_id": "S20213-LOG121-02", "student_id": "first_name.last_name+82@gmail.com" }, { "group_id": "S20213-LOG121-04", "student_id": "first_name.last_name+83@gmail.com" }, { "group_id": "S20213-LOG210-01", "student_id": "first_name.last_name+84@gmail.com" }, { "group_id": "S20213-LOG210-02", "student_id": "first_name.last_name+85@gmail.com" }, { "group_id": "S20213-LOG210-03", "student_id": "first_name.last_name+86@gmail.com" }, { "group_id": "S20213-LOG240-01", "student_id": "first_name.last_name+87@gmail.com" }, { "group_id": "S20213-LOG240-02", "student_id": "first_name.last_name+88@gmail.com" }, { "group_id": "S20213-LOG240-03", "student_id": "first_name.last_name+89@gmail.com" }, { "group_id": "S20213-LOG320-01", "student_id": "first_name.last_name+90@gmail.com" }, { "group_id": "S20213-LOG320-02", "student_id": "first_name.last_name+91@gmail.com" }, { "group_id": "S20213-LOG320-04", "student_id": "first_name.last_name+92@gmail.com" }, { "group_id": "S20213-LOG410-01", "student_id": "first_name.last_name+93@gmail.com" }, { "group_id": "S20213-LOG410-02", "student_id": "first_name.last_name+94@gmail.com" }, { "group_id": "S20213-LOG430-01", "student_id": "first_name.last_name+95@gmail.com" }, { "group_id": "S20213-LOG430-02", "student_id": "first_name.last_name+96@gmail.com" }, { "group_id": "S20213-LOG121-01", "student_id": "first_name.last_name+97@gmail.com" }, { "group_id": "S20213-LOG121-02", "student_id": "first_name.last_name+98@gmail.com" }, { "group_id": "S20213-LOG121-04", "student_id": "first_name.last_name+99@gmail.com" }, { "group_id": "S20213-LOG210-01", "student_id": "first_name.last_name+100@gmail.com" }]);
    });
});
